### Spinlock

- 정수변수
- 초기화, P(), V() 연산으로만 접근 가능
- P(), V()의 연산들은 indivisible(atomic) 연산, os가 support 해준다.
- S는 물건의 갯수, P는 물건을 빼가는 것, S는 물건을 넣어두는것

```java
void P(S){
    while(S <= 0){
        continue;
    }
    S = S - 1;
}

void V(S){
    S = S + 1;
}
```

- active라는 spinlock 변수를 1로 초기화 한다.
- critical section에 들어가기 전에 P(active)로 잠그고, V(active)를 통해 푼다.

### spinlock의 문제

- cpu(processor)가 한 개 일 때 프로세스 두 개다 일을 못하는 경우가 발생한다.
  - p1 프로세스가 P를 통해 critical section 작업 수행 중 p2 프로세스가 preemption을 한다.
  - p2가 P연산을 실행한다.
  - P연산의 whlile문에 걸리고(p1이 사용중이라) P연산은 os가 preemption이 안되는걸 보장하기 때문에 p2의 작업이 끝나지 않는다.
- 멀티 프로세서 시스템에만 사용가능
